{% macro investment_form(action, investment=None, today=None) %}
<form action="{{ action }}" method="POST" class="space-y-6">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div class="space-y-2">
      <label for="type_id" class="block text-sm font-medium text-gray-300">Yatırım Türü</label>
      <select name="type_id" id="type_id" required class="w-full px-2 py-1 bg-darkbg border border-gray-700 rounded-md text-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
        <option value="">Seçiniz</option>
        {% for type in types %}
          <optgroup label="{{ type.name }}">
            <option value="{{ type.id }}" {% if investment and investment.type_id == type.id %}selected{% endif %}>{{ type.name }}</option>
            {% for child in type.children %}
            <option value="{{ child.id }}" {% if investment and investment.type_id == child.id %}selected{% endif %}>{{ child.name }}</option>
            {% endfor %}
          </optgroup>
        {% endfor %}
      </select>
    </div>

    <div class="space-y-2">
      <label for="purchase_date" class="block text-sm font-medium text-gray-300">Alış Tarihi</label>
      <input type="date" name="purchase_date" id="purchase_date" required value="{{ investment.purchase_date.strftime('%Y-%m-%d') if investment else today }}" class="w-full px-2 py-1 bg-darkbg border border-gray-700 rounded-md text-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
    </div>

    <div class="space-y-2">
      <label for="purchase_price" class="block text-sm font-medium text-gray-300">Alış Fiyatı (₺)</label>
      <input type="number" step="0.01" name="purchase_price" id="purchase_price" required value="{{ "%.2f"|format(investment.purchase_price) if investment else '' }}" class="w-full px-2 py-1 bg-darkbg border border-gray-700 rounded-md text-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
    </div>

    <div class="space-y-2">
      <label for="current_price" class="block text-sm font-medium text-gray-300">Güncel Fiyat (₺)</label>
      <input type="number" step="0.01" name="current_price" id="current_price" required value="{{ "%.2f"|format(investment.current_price) if investment else '' }}" class="w-full px-2 py-1 bg-darkbg border border-gray-700 rounded-md text-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
    </div>

    <div class="space-y-2">
      <label for="quantity" class="block text-sm font-medium text-gray-300">Miktar</label>
      <input type="number" step="0.01" name="quantity" id="quantity" required value="{{ "%.2f"|format(investment.quantity) if investment else '' }}" class="w-full px-2 py-1 bg-darkbg border border-gray-700 rounded-md text-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
    </div>

    <div class="space-y-2">
      <label for="description" class="block text-sm font-medium text-gray-300">Açıklama</label>
      <textarea name="description" id="description" rows="3" class="w-full px-2 py-1 bg-darkbg border border-gray-700 rounded-md text-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">{{ investment.description if investment else '' }}</textarea>
    </div>
  </div>

  <div class="flex justify-end gap-3 mt-6">
    <a href="{{ url_for('investment.index') }}" class="inline-flex items-center gap-2 px-2 py-1 rounded-md bg-red-700/10 text-red-500 hover:bg-red-700/20 transition">
      <i class="fas fa-times"></i>
      İptal
    </a>
    <button type="submit" class="inline-flex items-center gap-2 px-2 py-1 rounded-md bg-primary/10 text-primary hover:bg-primary/20 transition">
      <i class="fas fa-save"></i>
      Kaydet
    </button>
  </div>
</form>
{% endmacro %} 